# Mock Exam: 2021-2022 Semester 2 (Spring)

**Module**: COMP1048 Databases and Interfaces
**Time Allowed**: 2 Hours
**Total Marks**: 50

---

## üìä ËÄÉÁÇπÂàÜÂ∏ÉÂàÜÊûê (Exam Analysis)

Ëøô‰ªΩËØïÂç∑ËÄÉÂØü‰∫Ü Web ÂºÄÂèëÂíåÊï∞ÊçÆÂ∫ìËÆæËÆ°ÁöÑÊ†∏ÂøÉÂÜÖÂÆπÔºåÂàÜÂ∏ÉÂ¶Ç‰∏ãÔºö

1.  **Web Programming (30%)**:
    *   **HTML/CSS**: Âü∫Á°ÄÊ¶ÇÂøµ„ÄÅÊó†ÈöúÁ¢çÊÄß (Accessibility)„ÄÅCSS ÈÄâÊã©Âô®‰∏éËßÑÂàô„ÄÇ
    *   **Flask**: Ë∑ØÁî± (Routing)„ÄÅHTTP ÊñπÊ≥ï (GET)„ÄÅË°®ÂçïÊï∞ÊçÆËé∑Âèñ (`request.args`)„ÄÇ
2.  **Relational DB Theory (30%)**:
    *   **Relational Algebra**: ÈÄâÊã© (œÉ)„ÄÅÊäïÂΩ± (œÄ)„ÄÅËøûÊé• (‚®ù)„ÄÇ
    *   **SQL Querying**: `LEFT JOIN` ÁöÑÊâßË°åÈÄªËæë„ÄÅÂ≠êÊü•ËØ¢ÊàñÂ∑ÆÈõÜÊìç‰Ωú„ÄÇ
    *   **DBMS**: ÁêÜËÆ∫‰ºòÂäø„ÄÇ
3.  **DB Design (40%)**:
    *   **ER Modelling**: ‰ªéÈúÄÊ±ÇÊñáÊú¨ÁªòÂà∂ ER Âõæ (ÂÆû‰Ωì„ÄÅÂ±ûÊÄß„ÄÅÂÖ≥Á≥ª„ÄÅÂü∫Êï∞)„ÄÇ
    *   **SQL DDL**: Âª∫Ë°®ËØ≠Âè•„ÄÅ‰∏ªÈîÆ„ÄÅÂ§ñÈîÆÁ∫¶Êùü„ÄÇ
    *   **Design Theory**: ER Ê®°Âûã‰∏éËßÑËåÉÂåñ (Normalization) ÁöÑÂØπÊØî„ÄÇ

---

## üìù Ê®°ÊãüËØïÈ¢ò‰∏éËØ¶Ëß£ (Mock Exam & Solutions)

### Question ONE ‚Äì Web Programming [15 marks]

**a) What is CSS and how does it work with HTML? [2 marks]**

> **ËÄÉÁÇπ**: CSS ÂÆö‰πâ, HTML ‰∏é CSS ÁöÑÂÖ≥Á≥ª„ÄÇ
> **Â§ç‰π†Á¨îËÆ∞**: [Section 3.1](Revision.md#31-html-and-css)

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à (Click to expand)</strong></summary>

*   **CSS (Cascading Style Sheets)** is a stylesheet language used to describe the presentation (look and formatting) of a document written in HTML.
*   **How it works**: HTML provides the **structure** (content) of the page, while CSS provides the **style** (layout, colors, fonts). The browser loads the HTML, parses it into a DOM, and then applies the CSS rules to the DOM elements to render the page.
</details>

**b) What is the difference between client-side and server-side scripting? Provide ONE example of a functionality for which client-side scripting should not be used? [2 marks]**

> **ËÄÉÁÇπ**: Client-Server Ê®°Âûã, ÂÆâÂÖ®ÊÄß„ÄÇ
> **Â§ç‰π†Á¨îËÆ∞**: [Section 3.2](Revision.md#32-web-application)

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **Difference**:
    *   **Client-side scripting** (e.g., JavaScript) runs in the user's web browser. It is used for UI interactivity and immediate validation.
    *   **Server-side scripting** (e.g., Python/Flask, PHP) runs on the web server. It handles database interactions, authentication, and business logic before sending the page to the client.
*   **Example where client-side should NOT be used**: **User Authentication** (logging in) or **Database Access**. You should never expose database credentials or verify passwords solely on the client side because it can be easily bypassed or inspected by the user.
</details>

**c) Identify and describe one accessibility feature included in the following code example: [2 marks]**
`<img src = 'imgs/cat.png' alt='A photo of a black and white cat'>`

> **ËÄÉÁÇπ**: HTML Accessibility (Êó†ÈöúÁ¢ç)„ÄÇ
> **Â§ç‰π†Á¨îËÆ∞**: [Section 3.1](Revision.md#31-html-and-css) (See "Accessibility")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **Feature**: The `alt` attribute (Alternative Text).
*   **Description**: It provides a text description ("A photo of a black and white cat") of the image. This is crucial for users with visual impairments who use **screen readers**, as the software reads this text aloud to describe the image content. It also displays if the image fails to load.
</details>

**d) Given the following HTML fragment, write a CSS rule which changes the font colour to be `red` and the font size to `24pt` for all elements with the class `rImportant`. [3 marks]**
```html
<p id='reminder'>
You <span class='rImportant'>must</span>
remember to brush your teeth.
</p>
```

> **ËÄÉÁÇπ**: CSS Class Selector, Â±ûÊÄßËÆæÁΩÆ„ÄÇ
> **Â§ç‰π†Á¨îËÆ∞**: [Section 3.1](Revision.md#31-html-and-css)

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

```css
.rImportant {
    color: red;
    font-size: 24pt;
}
```
*   *Note: Use `.` for class selectors.*
</details>

**e) Using Flask, write a function with correct routing to handle the form below. It should return "Hello [name]" or "Hello Stranger." if empty. [6 marks]**
```html
<form action="sayhi" method="get">
 <label for="username"> Please enter your name: </label>
 <input type="text" name="name" id="username">
 <input type="submit" value="Submit">
</form>
```

> **ËÄÉÁÇπ**: Flask Routing, GET Request Handling (`request.args`).
> **Â§ç‰π†Á¨îËÆ∞**: [Section 3.2](Revision.md#32-web-application)

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

```python
from flask import Flask, request

app = Flask(__name__)

@app.route('/sayhi', methods=['GET'])
def say_hi():
    # Access GET parameters using request.args
    user_name = request.args.get('name')
    
    if user_name:
        return f"Hello {user_name}"
    else:
        return "Hello Stranger."
```
*   *Key Points*:
    *   Route matches `action="sayhi"`.
    *   Method is `GET` (default, but good to specify).
    *   Use `request.args.get('name')` because `method="get"`. (If it were POST, use `request.form`).
</details>

---

### Question TWO ‚Äì Relational DB Design Theory and DBMS [15 marks]

**Data for Question:**
*   **Student**: `{(1, Anne), (2, Bob), (3, Carl)}`
*   **Book**: `{(1, Algorithms, Knuth), (2, Biology, Darwin), (3, Calculus, Newton), ...}`
*   **Borrow**: `{(1, 3, 06 Nov), (2, 2, 19 Aug), (3, 3, 12 Dec)}` (Schema: `bId`, `sId`, `brDue`)

**a) Write down the results of the following relational algebra expressions. [6 marks]**

> **ËÄÉÁÇπ**: Relational Algebra (œÉ, œÄ, ‚®ù).
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.1](Revision.md#21-relational-model) (See "Relational Algebra")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **i. œÉ_(bAuthor = 'Newton') (Book)**
    *   Result: The row containing the Calculus book.
    *   `{(3, Calculus, Newton)}`
*   **ii. œÄ_(bName, bAuthor) (œÉ_(bName = 'Algorithms') (Book))**
    *   Result: Just the name and author columns for the Algorithms book.
    *   `{(Algorithms, Knuth)}`
*   **iii. œÄ_(sName, bName, brDue)(œÉ_(sName = 'Bob') ((Student ‚®ù Borrow) ‚®ù Book))**
    *   Logic: Join all tables -> Filter for Bob -> Project Name, Book, Date.
    *   Bob (sId=2) borrowed Book bId=2 (Biology).
    *   Result: `{(Bob, Biology, 19 Aug 2022)}`
</details>

**b) List the output of the following SQL query: [2 marks]**
`SELECT * FROM Student LEFT JOIN Borrow on Student.sId > Borrow.bId;`

> **ËÄÉÁÇπ**: SQL `LEFT JOIN` with Non-Equi Join condition.
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.3](Revision.md#23-sql-queries) (See "Joins")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **Logic**:
    *   **Student 1 (Anne)**: Is 1 > any bId (1, 2, 3)? No. -> Returns 1 row with NULLs.
    *   **Student 2 (Bob)**: Is 2 > any bId? Yes, 2 > 1. -> Returns 1 row (joined with Borrow row bId=1).
    *   **Student 3 (Carl)**: Is 3 > any bId? Yes, 3 > 1 and 3 > 2. -> Returns 2 rows.
*   **Output (Approximate)**:
    1.  `1 | Anne | NULL | NULL | NULL`
    2.  `2 | Bob  | 1    | 3    | 06 Nov 2022`
    3.  `3 | Carl | 1    | 3    | 06 Nov 2022`
    4.  `3 | Carl | 2    | 2    | 19 Aug 2022`
</details>

**c) Write a query which returns the names of all Students who have not borrowed a book in both Relational Algebra and SQL. [4 marks]**

> **ËÄÉÁÇπ**: Difference (-) in RA, Subquery/`NOT EXISTS` in SQL.
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.1](Revision.md#21-relational-model) (Set operators) & [Section 2.3](Revision.md#23-sql-queries) (Advanced Querying)

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **Relational Algebra**:
    *   `œÄ_sName(Student) - œÄ_sName(Student ‚®ù Borrow)`
    *   *Alternative*: `œÄ_sName(œÉ_(sId ‚àâ œÄ_sId(Borrow))(Student))`
*   **SQL**:
    ```sql
    SELECT sName FROM Student
    WHERE sId NOT IN (SELECT sId FROM Borrow);
    ```
    *   *Alternative*:
    ```sql
    SELECT sName FROM Student s
    LEFT JOIN Borrow b ON s.sId = b.sId
    WHERE b.bId IS NULL;
    ```
</details>

**d) Advantages of utilising a DBMS over writing your own storage solution? [3 marks]**

> **ËÄÉÁÇπ**: DBMS ‰ºòÂäø (ACID, Security, Concurrency).
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.1](Revision.md#21-relational-model) (See "What is DBMS?")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

1.  **Data Independence**: Changes to data structure don't require changing the application code.
2.  **Data Integrity & Security**: DBMS enforces constraints (FKs) and access controls.
3.  **Concurrency Control**: Handles multiple users accessing data simultaneously without corruption.
4.  **Crash Recovery**: ACID properties ensure data is safe even if the system fails.
</details>

---

### Question THREE ‚Äì SQL and ER Design [20 marks]

**Scenario**: University Online Store.
*   **Products**: Name, Price, Desc, Stock.
*   **Customers**: Name, Email, Phone.
*   **Orders**: Date, Status (Pending, In-Progress, Shipped, Failed). One order -> Many products.
*   **Address**: Delivery address. Customer -> Many Addresses. Order -> One Address.

**a) Draw the Entity Relationship Diagram (ERD). [8 marks]**

> **ËÄÉÁÇπ**: ER Diagramming (Entities, Relationships, Cardinality).
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.2](Revision.md#22-database-design) (See "ER Diagram")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°àÊèèËø∞</strong></summary>

*   **Entities**:
    *   `Customer` (Attributes: cID, Name, Email, Phone)
    *   `Product` (Attributes: pID, Name, Price, Desc, Stock)
    *   `Order` (Attributes: oID, Date, Status)
    *   `Address` (Attributes: aID, Details)
*   **Relationships**:
    *   `Customer` **Places** `Order` (1:N) - One customer places many orders.
    *   `Customer` **Has** `Address` (1:N) - One customer has many addresses.
    *   `Order` **Contains** `Product` (M:N) - Order has many products, Product in many orders. (Requires attributes like Quantity on the relationship).
    *   `Order` **ShippedTo** `Address` (N:1) - Many orders can go to one address (or 1:1 depending on assumption, but usually N:1).
</details>

**b) Write the necessary SQL code (DDL). [8 marks]**

> **ËÄÉÁÇπ**: SQL `CREATE TABLE`, PK, FK, M:N implementation.
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.3](Revision.md#23-sql-queries) (See "DDL")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

```sql
CREATE TABLE Customer (
    cID INTEGER PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,
    Email VARCHAR(100) UNIQUE NOT NULL,
    Phone VARCHAR(20)
);

CREATE TABLE Address (
    aID INTEGER PRIMARY KEY,
    cID INTEGER NOT NULL,
    Details TEXT NOT NULL,
    FOREIGN KEY (cID) REFERENCES Customer(cID)
);

CREATE TABLE Product (
    pID INTEGER PRIMARY KEY,
    Name VARCHAR(100),
    Price DECIMAL(10, 2),
    Description TEXT,
    Stock INTEGER
);

CREATE TABLE Orders (
    oID INTEGER PRIMARY KEY,
    cID INTEGER NOT NULL,
    aID INTEGER NOT NULL, -- Delivery Address
    OrderDate DATE,
    Status VARCHAR(20) CHECK (Status IN ('Pending', 'In-Progress', 'Shipped', 'Failed')),
    FOREIGN KEY (cID) REFERENCES Customer(cID),
    FOREIGN KEY (aID) REFERENCES Address(aID)
);

-- Associative Table for M:N Relationship
CREATE TABLE OrderItem (
    oID INTEGER,
    pID INTEGER,
    Quantity INTEGER,
    PRIMARY KEY (oID, pID),
    FOREIGN KEY (oID) REFERENCES Orders(oID),
    FOREIGN KEY (pID) REFERENCES Product(pID)
);
```
</details>

**c) Why use ER Modelling? What other tools/methods exist? Difference? [4 marks]**

> **ËÄÉÁÇπ**: Design Methodology, Normalization.
> **Â§ç‰π†Á¨îËÆ∞**: [Section 2.2](Revision.md#22-database-design) (See "ER Diagram" & "Normalization")

<details>
<summary><strong>ÂèÇËÄÉÁ≠îÊ°à</strong></summary>

*   **Why ERM**: It provides a high-level, visual representation of data requirements that is easy to understand for stakeholders (non-technical users) and developers. It focuses on **conceptual design**.
*   **Other Tool**: **Normalization** (1NF, 2NF, 3NF).
*   **Difference**:
    *   **ERM** is a **Top-Down** approach (starts with entities/relationships).
    *   **Normalization** is a **Bottom-Up** approach (starts with attributes/data and organizes them to reduce redundancy).
    *   ERM is for communication and structure; Normalization is for validation and optimization.
</details>
