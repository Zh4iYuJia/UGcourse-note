# 考前 10 分钟速记表 (Cheat Sheet)

## 1. 必背：指针与 Const (Pointers & Const)
| 写法 | 英文术语 | 含义 | 记忆口诀 |
| :--- | :--- | :--- | :--- |
| `const int *p` | Pointer to Constant | **值不可变**，指向可变 | `const` 在 `*` 左边，锁住的是值 `*p` |
| `int * const p` | Constant Pointer | **指向不可变**，值可变 | `const` 在 `*` 右边，锁住的是指针 `p` |

## 2. 必背：动态内存 (Dynamic Memory)
### 标准模板
```c
// 1. 分配
int *arr = (int*)malloc(100 * sizeof(int)); 
// 2. 检查
if (arr == NULL) { exit(1); }
// 3. 释放
free(arr);
arr = NULL; // 好习惯：防止悬空指针
```
### 结构体内存陷阱 (Nested Malloc)
如果结构体里有指针成员，必须**由内向外**释放！
```c
struct Student { char *name; };
struct Student *s = malloc(sizeof(struct Student));
s->name = malloc(50); // 成员也分配了内存

// 错误释放：
free(s); // ❌ 完蛋，s->name 找不到了，内存泄漏！

// 正确释放：
free(s->name); // ✅ 先释放成员
free(s);       // ✅ 再释放结构体
```

## 3. 必背：字符串陷阱 (String Traps)
*   **比较**: 永远不要用 `if (s1 == s2)`！必须用 `if (strcmp(s1, s2) == 0)`。
*   **赋值**: 永远不要用 `s1 = s2` (除非是指针赋值)！必须用 `strcpy(s1, s2)`。
*   **输入**:
    *   `scanf("%s", str);` (不需要 `&`，因为数组名本身就是地址)
    *   `scanf("%d", &num);` (整数必须加 `&`)

## 4. 核心代码模式 (Code Patterns)
### 模式 A: 修改外部指针 (二级指针)
如果你想在函数里改变一个指针的指向 (例如分配内存)，必须传 `**pp`。
```c
void allocate(int **p) {      // 接受指针的地址
    *p = malloc(sizeof(int)); // *p 代表修改外面的指针
}
// 调用:
int *ptr = NULL;
allocate(&ptr); // 传地址
```

### 模式 B: 链表遍历 (Linked List Traversal)
永远不要直接移动头指针 `head`，否则链表就丢了！
```c
void printList(Node *head) {
    Node *current = head; // ✅ 创建临时指针
    while (current != NULL) {
        printf("%d ", current->data);
        current = current->next;
    }
}
```

## 5. 常见错误自查 (Sanity Check)
1.  **未初始化指针**: `int *p; *p = 10;` (❌ 崩溃！p 指向随机地址) -> `int *p = malloc(...);`
2.  **返回局部地址**: `int* f() { int x=10; return &x; }` (❌ 崩溃！x 在函数结束时销毁)
3.  **分号陷阱**: `struct S { ... };` (结构体定义最后必须有分号)
4.  **指针优先级**: `*p++` 等价于 `*(p++)` (先取值，后移动指针)。如果想值加一，用 `(*p)++`。

---
**祝考试顺利！Good Luck!**
